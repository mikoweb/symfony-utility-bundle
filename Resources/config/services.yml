services:
    # klasa do pobierania adresów ścieżek
    app_path:
        class: vSymfo\Core\ApplicationPaths
        arguments: [@service_container]

    # rozszerzenia twig
    vsymfo_core.twig.utilities:
        class: vSymfo\Bundle\CoreBundle\TwigExtension\UtilitiesExtension
        arguments: [@service_container]
        tags:
            - { name: twig.extension }

    vsymfo_core.twig.noscript:
        class: vSymfo\Bundle\CoreBundle\TwigExtension\NoScriptExtension
        tags:
            - { name: twig.extension }

    # ten listener jest po to żeby dla zaplecza dało się stworzyć osobny motyw
    vsymfo_core.event.listener.themegroup:
        class: vSymfo\Bundle\CoreBundle\EventListener\ThemeGroupListener
        arguments: [@service_container]
        tags:
            - { name: kernel.event_listener, event: kernel.request, method: onKernelRequest, priority: 2 }

    # implementacja dokumentu, domyślnie html ale format i tak będzie zależał od parametru _format w urlu
    # więcej informacji w klasie DocumentListener
    document:
        class: vSymfo\Component\Document\Format\HtmlDocument

    # tworzenie usługi dokumentu po otrzymaniu parametru _format z routera
    vsymfo_core.event.listener.document:
        class: vSymfo\Bundle\CoreBundle\EventListener\DocumentListener
        arguments: [@service_container]
        tags:
            - { name: kernel.event_listener, event: kernel.request, method: onKernelRequest, priority: 1 }

    # usługa przechwytuje niektóre wyjątki i decyduje co ma być wyświetlone
    vsymfo_core.event.listener.exception:
        class:  vSymfo\Bundle\CoreBundle\EventListener\ExceptionListener
        arguments: [@service_container]
        tags:
            - { name: kernel.event_listener, event: kernel.exception, method: onKernelException }

    # kontroler obsługi wyjątków
    vsymfo_core.twig.exception_controller:
        class: vSymfo\Bundle\CoreBundle\Controller\ExceptionController
        arguments: [ "@twig", "%kernel.debug%", "@service_container" ]